<!DOCTYPE html>
<html>
  <head>
    <title>Google Calendar API Quickstart</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <button id="btnCreateEvents" class="btn btn-primary" onclick="makeApiCall();">
                    Create Events</button>  

<div id="divifm">
                    <iframe id="ifmCalendar" 
                    src="https://www.google.com/calendar/embed?
                    height=550&amp;wkst=1&amp;bgcolor=%23FFFFFF&
                    amp;src=28b89a6d9635d84201f872206c07ad4b9544854c6b287bd83efdc183c0d269ce@group.calendar.google.com&
                    amp;color=%238C500B&amp;ctz=Asia%2FCalcutta"
                        style="border-width: 0" width="950" 
                        height="520" frameborder="0" scrolling="no">
                    </iframe>
                </div>

    <script type="text/javascript">
			// Google api console clientID and apiKey 

			var clientId = '154825715905-8rnbkjeqthqlp1hm99j6prn9mcmj6b0c.apps.googleusercontent.com';
			var apiKey = 'AIzaSyDTxmzGbNT6M4jWOWzLjKLsKwGDOjW9IdA';

			// enter the scope of current project (this API must be turned on in the Google console)
			var scopes = 'https://www.googleapis.com/auth/calendar';


			// OAuth2 functions
			function handleClientLoad() {
				gapi.client.setApiKey(apiKey);
				window.setTimeout(checkAuth, 1);
			}

			//To authenticate
			function checkAuth() {
				gapi.auth.authorize({ client_id: clientId, scope: scopes, immediate: true }, handleAuthResult);
			}
			const today = Date.now();
			// This is the resource we will pass while calling api function
			var resource = {
				"summary": "My Event",
				"start": {
						"dateTime": today
				},
				"end": {
						"dateTime": today
				},
				"description":"We are organizing events",
				"location":"US",
				"attendees":[
					{
						"email":"attendee1@gmail.com",
						"displayName":"Jhon",
						"organizer":true,
						"self":false,
						"resource":false,
						"optional":false,
						"responseStatus":"needsAction",
						"comment":"This is my demo event",
						"additionalGuests":3
									
					},
					{    
						"email":"attendee2@gmail.com",
						"displayName":"Marry",
						"organizer":true,
						"self":false,
						"resource":false,
						"optional":false,
						"responseStatus":"needsAction",
						"comment":"This is an official event",
						"additionalGuests":3
					}
				],
			};

			function makeApiCall() {
				gapi.client.load('calendar', 'v3', function () { // load the calendar api (version 3)
					var request = gapi.client.calendar.events.insert({
						'calendarId': '28b89a6d9635d84201f872206c07ad4b9544854c6b287bd83efdc183c0d269ce@group.calendar.google.com', 
						"resource": resource 	// above resource will be passed here
					});              
				});
			}
    </script>
    <script async defer src="https://apis.google.com/js/api.js"></script>
    <script async defer src="https://accounts.google.com/gsi/client"></script>
  </body>
</html>