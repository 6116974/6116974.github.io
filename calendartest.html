<!DOCTYPE html>
<html>
  <head>
    <title>Google Calendar API Quickstart</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <p>Google Calendar API Quickstart</p>

    <!--Add buttons to initiate auth sequence and sign out-->
    <button id="authorize_button" onclick="handleAuthClick()">Authorize</button>
    <button id="signout_button" onclick="handleSignoutClick()">Sign Out</button>
		<button id="signout_button" onclick="listUpcomingEvents()">Retrieve</button>

    <pre id="content" style="white-space: pre-wrap;"></pre>

    <script type="text/javascript">
			//async function to handle data fetching
			async function getData () {
				//try catch block to handle promises and errors
				try {
					const calendarId = '28b89a6d9635d84201f872206c07ad4b9544854c6b287bd83efdc183c0d269ce@group.calendar.google.com'
					const myKey = 'AIzaSyDTxmzGbNT6M4jWOWzLjKLsKwGDOjW9IdA'
					//using await and fetch together as two standard ES6 client side features to extract the data
					let apiCall = await fetch('https://www.googleapis.com/calendar/v3/calendars/' + calendarId+ '/events?key=' + myKey)
					//response.json() is a method on the Response object that lets you extract a JSON object from the response
					//response.json() returns a promise resolved to a JSON object
					let apiResponse = await apiCall.json()
					console.log(apiResponse)
				} catch (error) {
					console.log(error)
				}
			}
			getData()
    </script>
    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
  </body>
</html>